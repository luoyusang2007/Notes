
# 公钥和私钥
- 公钥是公开的密钥，私钥是生成私钥的人自己留着的。
- 只要公私钥是一对，其中一个加密的就可以用另一个解出来。

## 公钥加密私钥解密
- 服务器-客户机通信时一般是公钥加密私钥解密。服务器不验证客户端真伪，所以主动把公钥发给客户端，让客户端用于加密请求。
  - 注意此时再用私钥加密信息响应客户端是不安全的。因为别人也可能知道服务器公钥，也可解密。
- 在已经事先存了对方的公钥的情况下，验证对方身份时候，给对方一个对方公钥加密的随机数，如果对方解密正确，说明对方身份可以信任。

## 私钥加密公钥解密
- 在对方事先存了我的公钥的情况下，我用私钥加密时间戳或者其它可以验证的信息（如随机数+随机数的哈希），对方解密并验证合法性，可以向对方证明我的可靠性。
  - 如果我请求信息，那么对方可以按照我发去的密钥加密后传给我。
  - 如果我发送指令，请注意这个指令应该是一次性且有时效的，要有计数器或者其它机制防止他人复制字串重复执行。
- 验证签名和证书时是公钥解密。

# 签名和证书
## 签名
- 签名指的是把被签名内容的指纹（或者叫摘要，内容的哈希值）用发送者的私钥加密。
- 接收者事先要有发送者的公钥，才能解密，然后验证内容是不是发送者发送的。

## 证书
当接收者事先没有发送者公钥时，就需要CA辅助。CA是受信任的组织，发送者（也就是证书申请者）在CA注册，CA用CA的私钥加密申请者的公钥。

# SSH

# SSL/TLS
TLS就是升级版的SSL，TLS1.0和SSL3.0几乎没有区别。

# HTTPS
https://www.jianshu.com/p/14cd2c9d2cd2   

## 思路
- 客户端验证服务器后，用服务器的公钥加密一个新随机生成的密钥
- 然后双方用这个密钥通信

## 步骤
- 客户端请求页面
- 服务器返回证书（CRT）公钥
- 客户端验证证书，如果无法验证则通知用户
- 如果验证成功，生成一个AES密钥（用于以后的通信），用CRT公钥加密传给服务器
- 服务器用私钥解密出AES密钥
- 双方使用这个AES密钥进行后续通信










